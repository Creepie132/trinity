# ๐ฑ ะัะบะพะฒะพะดััะฒะพ ะฟะพ SMS ัะฐัััะปะบะฐะผ

## ๐ ะกััะฐะฝะธัะฐ SMS

**URL:** `/sms`

## ๐ ะะพะทะผะพะถะฝะพััะธ

### 1. **ะคะพัะผะฐ ะฝะพะฒะพะน ัะฐัััะปะบะธ**

#### ะะพะปั ัะพัะผั:
- **ืฉื ืืงืืคืืื** (ะะผั ะบะฐะผะฟะฐะฝะธะธ) โ ะดะปั ะธะดะตะฝัะธัะธะบะฐัะธะธ
- **ืชืืื ืืืืืขื** (ะกะพะดะตัะถะฐะฝะธะต ัะพะพะฑัะตะฝะธั):
  - ะะฐะบัะธะผัะผ 160 ัะธะผะฒะพะปะพะฒ = 1 SMS
  - 161-306 ัะธะผะฒะพะปะพะฒ = 2 SMS (153 ัะธะผะฒะพะปะฐ/ัะฐััั)
  - ะะฒัะพะผะฐัะธัะตัะบะธะน ะฟะพะดัััั ัะธะผะฒะพะปะพะฒ ะธ ัะฐััะตะน

#### ะขะธะฟั ัะฐัััะปะบะธ:

##### ๐ต **ืฉืื ืืืืื** (ะัะฟัะฐะฒะธัั ะฒัะตะผ)
- ะัะฟัะฐะฒะปัะตั ะฒัะตะผ ะบะปะธะตะฝัะฐะผ ะฒ ะฑะฐะทะต
- ะะพะบะฐะทัะฒะฐะตั ะบะพะปะธัะตััะฒะพ ะฟะพะปััะฐัะตะปะตะน

##### ๐ข **ืฉืื ืืืงืื ืืื** (ะัะฟัะฐะฒะธัั ะพะดะฝะพะผั)
- ะัะฟะฐะดะฐััะธะน ัะฟะธัะพะบ ะบะปะธะตะฝัะพะฒ
- ะะพะธัะบ ะฟะพ ะธะผะตะฝะธ/ัะตะปะตัะพะฝั
- ะัะฟัะฐะฒะบะฐ ะพะดะฝะพะผั ะฒัะฑัะฐะฝะฝะพะผั ะบะปะธะตะฝัั

##### ๐ **ืืงืืืืช ืื ืคืขืืืื** (ะะตะฐะบัะธะฒะฝัะต ะบะปะธะตะฝัั)
- ะะปะธะตะฝัั, ะฝะต ะฟะพัะตัะฐะฒัะธะต X ะดะฝะตะน
- ะะฐัััะฐะธะฒะฐะตะผะพะต ะบะพะปะธัะตััะฒะพ ะดะฝะตะน
- ะะฒัะพะผะฐัะธัะตัะบะธะน ะฟะพะดัััั ะฟะพะปััะฐัะตะปะตะน

#### ะัะตะฒัั:
- **ะะพะปะธัะตััะฒะพ ะฟะพะปััะฐัะตะปะตะน** โ ะพะฑะฝะพะฒะปัะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
- **ะะพะปะธัะตััะฒะพ SMS ัะฐััะตะน** โ ะตัะปะธ ัะพะพะฑัะตะฝะธะต ะดะปะธะฝะฝะพะต
- **ะัะตะฝะบะฐ ััะพะธะผะพััะธ** โ ะบะพะปะธัะตััะฒะพ SMS ร ะฟะพะปััะฐัะตะปะธ

#### ะะพะดัะฒะตัะถะดะตะฝะธะต:
- ะะธะฐะปะพะณ ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฟะตัะตะด ะพัะฟัะฐะฒะบะพะน
- ะะพะบะฐะทัะฒะฐะตั ัะธะฝะฐะปัะฝะพะต ะบะพะปะธัะตััะฒะพ ะฟะพะปััะฐัะตะปะตะน
- ะัะตะดัะฟัะตะถะดะตะฝะธะต ะพ ะผะฝะพะณะพัะฐััะฝัั SMS

### 2. **ะััะพัะธั ัะฐัััะปะพะบ**

#### ะขะฐะฑะปะธัะฐ ะบะฐะผะฟะฐะฝะธะน:

**ะกัะพะปะฑัั:**
- **ืฉื** (ะะผั)
- **ืชืืจืื** (ะะฐัะฐ)
- **ืืงืืืื** (ะะพะปััะฐัะตะปะธ) โ ะพะฑัะตะต ะบะพะปะธัะตััะฒะพ
- **ืืฉืืื** (ะัะฟัะฐะฒะปะตะฝะพ) โ ััะฟะตัะฝะพ
- **ืืืฉืื** (ะัะธะฑะบะธ)
- **ืกืืืืก** (ะกัะฐััั)
- **ืคืขืืืืช** (ะะตะนััะฒะธั) โ ะฟัะพัะผะพัั ะดะตัะฐะปะตะน

**ะกัะฐัััั ะบะฐะผะฟะฐะฝะธะน:**
- ๐ข **ืืืฉืื** (completed) โ ะทะฐะฒะตััะตะฝะฐ
- ๐ต **ืฉืืื** (sending) โ ะพัะฟัะฐะฒะปัะตััั
- ๐ด **ืืืฉื** (failed) โ ะพัะธะฑะบะฐ
- โช **ืืืืื** (draft) โ ัะตัะฝะพะฒะธะบ

### 3. **ะะตัะฐะปะธ ะบะฐะผะฟะฐะฝะธะธ**

**ะะปะธะบ ะฟะพ ัััะพะบะต โ ะพัะบััะฒะฐะตั Sheet ั:**

#### ะะฝัะพัะผะฐัะธั ะพ ะบะฐะผะฟะฐะฝะธะธ:
- ะกัะฐััั
- ะขะธะฟ ัะฐัััะปะบะธ
- ะะฐัะฐ ัะพะทะดะฐะฝะธั
- ะะฐัะฐ ะพัะฟัะฐะฒะบะธ

#### ะกัะฐัะธััะธะบะฐ:
- ๐ ะะพะปะธัะตััะฒะพ ะฟะพะปััะฐัะตะปะตะน
- โ ะัะฟัะฐะฒะปะตะฝะพ ััะฟะตัะฝะพ
- โ ะัะธะฑะบะธ ะพัะฟัะฐะฒะบะธ

#### ะกะพะดะตัะถะฐะฝะธะต ัะพะพะฑัะตะฝะธั:
- ะะพะปะฝัะน ัะตะบัั ะพัะฟัะฐะฒะปะตะฝะฝะพะน SMS

#### ะขะฐะฑะปะธัะฐ ะพัะดะตะปัะฝัั SMS:
- **ืืงืื** (ะะปะธะตะฝั)
- **ืืืคืื** (ะขะตะปะตัะพะฝ)
- **ืกืืืืก** (ะกัะฐััั):
  - ๐ข ืืฉืื (sent)
  - ๐ต ืืืกืจ (delivered)
  - ๐ด ืืืฉื (failed)
  - โณ ืืืชืื (pending)
- **ืชืืจืื** (ะะฐัะฐ ะพัะฟัะฐะฒะบะธ)

## ๐ง API Endpoints

### POST /api/sms/send

ะััะผะฐั ะพัะฟัะฐะฒะบะฐ SMS.

**Request:**
```json
{
  "phones": ["+972501234567", "+972509876543"],
  "message": "ืฉืืื! ืื ืืืืขืช ืืืืงื",
  "campaign_id": "uuid" // ะพะฟัะธะพะฝะฐะปัะฝะพ
}
```

**Response:**
```json
{
  "success": true,
  "sent_count": 2,
  "failed_count": 0,
  "results": [
    { "phone": "+972501234567", "success": true },
    { "phone": "+972509876543", "success": true }
  ]
}
```

### POST /api/sms/campaign

ะกะพะทะดะฐะฝะธะต ะธ ะทะฐะฟััะบ ะบะฐะผะฟะฐะฝะธะธ.

**Request:**
```json
{
  "name": "ืชืืืืจืช ืืืืงืืจ",
  "message": "ืฉืืื! ืื ืชืืืืจืช...",
  "filter_type": "inactive_days",
  "filter_value": "30"
}
```

**ะขะธะฟั ัะธะปัััะพะฒ:**
- `"all"` โ ะฒัะต ะบะปะธะตะฝัั
- `"single"` โ ะพะดะธะฝ ะบะปะธะตะฝั (filter_value = client_id)
- `"inactive_days"` โ ะฝะตะฐะบัะธะฒะฝัะต (filter_value = ะบะพะปะธัะตััะฒะพ ะดะฝะตะน)

**Response:**
```json
{
  "success": true,
  "campaign_id": "uuid",
  "recipients_count": 45,
  "sent_count": 43,
  "failed_count": 2
}
```

## ๐ ะะฐัััะพะนะบะฐ InforU API

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (.env.local):

```env
INFORU_API_TOKEN=your_api_token_here
INFORU_SENDER_NAME=YourBusiness
```

### ะะพะปััะตะฝะธะต ัะพะบะตะฝะฐ:

1. ะะฐัะตะณะธัััะธััะนัะตัั ะฝะฐ [inforu.co.il](https://www.inforu.co.il)
2. ะะตัะตะนะดะธัะต ะฒ ัะฐะทะดะตะป API
3. ะกะบะพะฟะธััะนัะต API Token
4. ะะฐัััะพะนัะต ะธะผั ะพัะฟัะฐะฒะธัะตะปั (ะดะพ 11 ัะธะผะฒะพะปะพะฒ)

## ๐ ะะฐะทะฐ ะดะฐะฝะฝัั

### ะขะฐะฑะปะธัั:

#### `sms_campaigns`
- ะฅัะฐะฝะธั ะธะฝัะพัะผะฐัะธั ะพ ัะฐัััะปะบะฐั
- ะกัะฐัะธััะธะบะฐ (ะฟะพะปััะฐัะตะปะธ, ะพัะฟัะฐะฒะปะตะฝะพ, ะพัะธะฑะบะธ)
- ะขะธะฟ ัะธะปัััะฐ ะธ ะฟะฐัะฐะผะตััั

#### `sms_messages`
- ะัะดะตะปัะฝัะต SMS ัะพะพะฑัะตะฝะธั
- ะกะฒัะทั ั ะบะฐะผะฟะฐะฝะธะตะน ะธ ะบะปะธะตะฝัะพะผ
- ะกัะฐััั ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั
- ะขะตะบัั ะพัะธะฑะบะธ (ะตัะปะธ ะตััั)

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### 1. ะขะตััะพะฒะฐั ัะฐัััะปะบะฐ ะพะดะฝะพะผั ะบะปะธะตะฝัั:

```
1. ะัะบัะพะน /sms
2. ะะฐะฟะพะปะฝะธ ัะพัะผั:
   - ะะผั: "ะขะตัั"
   - ะกะพะพะฑัะตะฝะธะต: "ืฉืืื! ืื ืืืืขืช ืืืืงื"
3. ะัะฑะตัะธ "ืฉืื ืืืงืื ืืื"
4. ะัะฑะตัะธ ัะตะฑั ะธะท ัะฟะธัะบะฐ
5. ะะฐะถะผะธ "ืฉืื"
6. ะะพะดัะฒะตัะดะธ ะพัะฟัะฐะฒะบั
7. ะัะพะฒะตัั SMS ะฝะฐ ัะตะปะตัะพะฝะต
```

### 2. ะขะตัั ะฝะตะฐะบัะธะฒะฝัั ะบะปะธะตะฝัะพะฒ:

```
1. ะัะฑะตัะธ "ืืงืืืืช ืื ืคืขืืืื"
2. ะฃะบะฐะถะธ ะบะพะปะธัะตััะฒะพ ะดะฝะตะน: 30
3. ะะพัะผะพััะธ ะฟัะตะฒัั ะฟะพะปััะฐัะตะปะตะน
4. ะัะฟัะฐะฒั ัะตััะพะฒะพะต ัะพะพะฑัะตะฝะธะต
```

### 3. ะัะพัะผะพัั ะดะตัะฐะปะตะน:

```
1. ะะฐะนะดะธ ะบะฐะผะฟะฐะฝะธั ะฒ ะธััะพัะธะธ
2. ะะปะธะบะฝะธ ะฟะพ ัััะพะบะต
3. ะัะพะฒะตัั ััะฐัะธััะธะบั
4. ะะพัะผะพััะธ ัะฟะธัะพะบ ะพัะดะตะปัะฝัั SMS
5. ะัะพะฒะตัั ััะฐัััั
```

## ๐ก ะัััะธะต ะฟัะฐะบัะธะบะธ

### ะขะตะบัั ัะพะพะฑัะตะฝะธะน:
- โ ะัะฐัะบะพััั (ะดะพ 160 ัะธะผะฒะพะปะพะฒ)
- โ ะะตััะพะฝะฐะปะธะทะฐัะธั (ะธะผั ะบะปะธะตะฝัะฐ)
- โ ะัะธะทัะฒ ะบ ะดะตะนััะฒะธั (CTA)
- โ ะฃะบะฐะทะฐะฝะธะต ะพัะฟัะฐะฒะธัะตะปั
- โ ะะทะฑะตะณะฐะน ัะฟะฐะผะฐ
- โ ะะต ัะปะธ ัะปะธัะบะพะผ ัะฐััะพ

### ะัะธะผะตัั ัะพะพะฑัะตะฝะธะน:

**ะะฐะฟะพะผะธะฝะฐะฝะธะต ะพ ะฒะธะทะธัะต:**
```
ืฉืืื {ะะะฏ}! ืื ืชืืืืจืช ืืืืงืืจ ืฉืื ื-{ะะะขะ}. ืืืืฉืืจ: {ะขะะะะคะะ}
```

**ะกะฟะตัะธะฐะปัะฝะพะต ะฟัะตะดะปะพะถะตะฝะธะต:**
```
{ะะะฏ} ืืงืจ/ื! ืืืฆืข ืืืืื ืจืง ืืืื - ืืืื ืฉื 20%! ืืืืืืช ืชืืจ: {ะกะกะซะะะ}
```

**ะะปะฐะณะพะดะฐัะฝะพััั:**
```
ืชืืื ืฉืืืงืจืช ืืฆืืื! ืืฉืื ืืจืืืชื ืฉืื. {ะะะะะะก}
```

## ๐ ะะฝะฐะปะธะท ัะตะทัะปััะฐัะพะฒ

ะ ะดะตัะฐะปัั ะบะฐะผะฟะฐะฝะธะธ ัะผะพััะธ:
- **ะัะพัะตะฝั ะดะพััะฐะฒะบะธ** = (ะพัะฟัะฐะฒะปะตะฝะพ รท ะฟะพะปััะฐัะตะปะธ) ร 100%
- **ะัะพะฑะปะตะผะฝัะต ะฝะพะผะตัะฐ** โ ัะธะปััััะน ะฟะพ "ืืืฉื"
- **ะัะตะผั ะพัะฟัะฐะฒะบะธ** โ ะพะฟัะธะผะธะทะธััะน ะฟะพ ัะฐัะฐะผ

## ๐ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

ะกะธััะตะผะฐ SMS ะฟะพะปะฝะพัััั ะธะฝัะตะณัะธัะพะฒะฐะฝะฐ ั:
- โ InforU Mobile API
- โ Supabase (ะะ)
- โ React Query (ะบััะธัะพะฒะฐะฝะธะต)
- โ ะคะธะปัััั ะบะปะธะตะฝัะพะฒ
- โ RTL ะธะฝัะตััะตะนั ะฝะฐ ะธะฒัะธัะต
