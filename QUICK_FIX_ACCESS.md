# üö® –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ

## –ü—Ä–æ–±–ª–µ–º–∞
Middleware –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –Ω–µ –≤ `admin_users` –∏ –Ω–µ –≤ `org_users`.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ó–∞–π–¥–∏ –≤ Supabase
1. –û—Ç–∫—Ä–æ–π [supabase.com](https://supabase.com)
2. –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç **Trinity**
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **SQL Editor**
4. –ù–∞–∂–º–∏ **"New query"**

---

### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—ã–ø–æ–ª–Ω–∏ —ç—Ç–æ—Ç SQL

```sql
-- –î–û–ë–ê–í–ò–¢–¨ –°–ï–ë–Ø –ö–ê–ö –ê–î–ú–ò–ù–ê
-- (–¥–∞—Å—Ç –¥–æ—Å—Ç—É–ø –∫–æ –í–°–ï–ô —Å–∏—Å—Ç–µ–º–µ)

-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫–∏ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
ALTER TABLE admin_users
ADD COLUMN IF NOT EXISTS full_name TEXT;

ALTER TABLE admin_users
ADD COLUMN IF NOT EXISTS role TEXT DEFAULT 'admin';

-- –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–±—è –≤ –∞–¥–º–∏–Ω—ã
INSERT INTO admin_users (id, user_id, email, full_name, role, created_at)
SELECT 
  gen_random_uuid(),
  id,
  email,
  'Vlad Khalphin',
  'admin',
  NOW()
FROM auth.users 
WHERE email = 'creepie1357@gmail.com'
ON CONFLICT (user_id) DO UPDATE 
SET 
  full_name = 'Vlad Khalphin',
  role = 'admin';

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT * FROM admin_users WHERE email = 'creepie1357@gmail.com';
```

---

### –®–∞–≥ 3: –ù–∞–∂–º–∏ **"Run"** (–∏–ª–∏ F5)

–î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–∞ —Å —Ç–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- `email`: creepie1357@gmail.com
- `full_name`: Vlad Khalphin
- `role`: admin

---

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å–∞–π—Ç

1. –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç Trinity
2. –ù–∞–∂–º–∏ **Ctrl/Cmd + Shift + R** (hard reload)
3. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚úÖ

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç—ã –±—É–¥–µ—à—å **—Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–æ–º** –∏ —Å–º–æ–∂–µ—à—å:
- ‚úÖ –ó–∞—Ö–æ–¥–∏—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É (`/`)
- ‚úÖ –ó–∞—Ö–æ–¥–∏—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`/admin`)
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ù–∞–∑–Ω–∞—á–∞—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–¥–º–∏–Ω–∞–º–∏

---

## ‚ùå –ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ

### –û—à–∏–±–∫–∞: "No rows returned"
–ó–Ω–∞—á–∏—Ç —Ç—ã –µ—â–µ –Ω–∏ —Ä–∞–∑—É –Ω–µ –ª–æ–≥–∏–Ω–∏–ª—Å—è –Ω–∞ —Å–∞–π—Ç. –°–Ω–∞—á–∞–ª–∞:
1. –ó–∞–π–¥–∏ –Ω–∞ —Å–∞–π—Ç `/login`
2. –ó–∞–ª–æ–≥–∏–Ω—å—Å—è —á–µ—Ä–µ–∑ Supabase Auth
3. –ü–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω–∏ SQL –≤—ã—à–µ

### –û—à–∏–±–∫–∞: "Permission denied"
–ò—Å–ø–æ–ª—å–∑—É–µ—à—å –Ω–µ —Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç –≤ Supabase. –£–±–µ–¥–∏—Å—å —á—Ç–æ:
- –û—Ç–∫—Ä—ã—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Service Role Key (–Ω–µ ANON)

---

## üìã –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ß–µ—Ä–µ–∑ Supabase Dashboard

1. –û—Ç–∫—Ä–æ–π **Table Editor** ‚Üí `admin_users`
2. –ù–∞–∂–º–∏ **"Insert row"**
3. –ó–∞–ø–æ–ª–Ω–∏:
   - `user_id`: (—Å–∫–æ–ø–∏—Ä—É–π –∏–∑ `auth.users` WHERE email = 'creepie1357@gmail.com')
   - `email`: creepie1357@gmail.com
   - `full_name`: Vlad Khalphin
   - `role`: admin
4. –ù–∞–∂–º–∏ **"Save"**

---

**–§–∞–π–ª:** `SETUP_ACCESS.sql` ‚Äî –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π
