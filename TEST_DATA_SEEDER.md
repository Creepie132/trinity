# ğŸŒ± Test Data Seeder

**Version:** 2.19.0  
**Date:** 2026-02-12

---

## ğŸ“‹ Overview

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ "Test" Ñ€ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ¾Ğ² Ğ¸ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ°.

---

## ğŸ¯ What It Does

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ² Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ "Test":
- **25 ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²** Ñ Ğ¸Ğ·Ñ€Ğ°Ğ¸Ğ»ÑŒÑĞºĞ¸Ğ¼Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ°Ğ¼Ğ¸ Ğ½Ğ° Ğ¸Ğ²Ñ€Ğ¸Ñ‚Ğµ
- **80 Ğ²Ğ¸Ğ·Ğ¸Ñ‚Ğ¾Ğ²** Ñ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ ÑƒÑĞ»ÑƒĞ³Ğ°Ğ¼Ğ¸
- **40 Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹** Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°Ğ¼Ğ¸ Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹

---

## ğŸš€ Usage

### Method 1: Admin UI (Recommended)

1. Ğ’Ğ¾Ğ¹Ğ´Ğ¸ Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºÑƒ: `/admin`
2. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸ Ğ² Organizations
3. ĞĞ°Ğ¹Ğ´Ğ¸ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ **"Test"**
4. ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ½Ğ° Ğ½ĞµÑ‘ (Eye icon)
5. Ğ’ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²ÑˆĞµĞ¼ÑÑ Sheet Ğ½Ğ°Ğ¹Ğ´Ğ¸ Ğ¶Ñ‘Ğ»Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ **"× ×ª×•× ×™ ×‘×“×™×§×”"**
6. ĞĞ°Ğ¶Ğ¼Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ **"××œ× × ×ª×•× ×™ ×‘×“×™×§×”"**
7. ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸ Ğ² Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğµ
8. Ğ”Ğ¾Ğ¶Ğ´Ğ¸ÑÑŒ toast ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°Ğ¼Ğ¸

**Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹:**
- ğŸ Ğ–Ñ‘Ğ»Ñ‚Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Test)
- ğŸ”„ Spinner Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- âœ… Toast Ñ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ¼ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹

---

### Method 2: API Endpoint

```bash
# Direct API call
curl -X POST https://trinity-sage.vercel.app/api/admin/seed-test-data \
  -H "Cookie: sb-xxx-auth-token=..." \
  -H "Content-Type: application/json"
```

**Response:**
```json
{
  "success": true,
  "message": "× ×ª×•× ×™ ×‘×“×™×§×” × ×•×¦×¨×• ×‘×”×¦×œ×—×”",
  "data": {
    "organization": "Test",
    "org_id": "uuid",
    "clients": 25,
    "visits": 80,
    "payments": 40
  }
}
```

---

### Method 3: Local Script

```bash
# Run standalone script
npx tsx scripts/seed-test-data.ts
```

**Requirements:**
- Environment variables set (`.env.local`)
- Service role key access

**Output:**
```
ğŸŒ± Starting seed for Test organization...

âœ… Found Test organization: uuid

ğŸ“ Creating 25 clients...
âœ… Created 25 clients

ğŸ“ Creating 80 visits...
âœ… Created 80 visits

ğŸ“ Creating 40 payments...
âœ… Created 40 payments

ğŸ‰ Seed completed successfully!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Organization: Test
Clients: 25
Visits: 80
Payments: 40
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Done!
```

---

## ğŸ“Š Data Specification

### 1. Clients (25 total)

**Israeli Names (Hebrew):**
- ×“× ×” ×›×”×Ÿ, ×™×•×¡×™ ×œ×•×™, ××™×¨×‘ ××‘×¨×”×
- ××œ×•×Ÿ ×“×•×“, × ×•×¢×” ×¤×¨×¥, ×¨×•× ×™ ×©××¢×•×Ÿ
- ×ª××¨ ×™×¢×§×‘, ××•×¨×™ ××–×¨×—×™, ×©×™×¨×” ×’×•×œ×“×‘×¨×’
- ×¢×•××¨ ×—×™×™×, ×œ×™××ª ×‘×¨×§, ××™×™×œ ×¨×•×–×Ÿ
- ×××™×” ×©×œ×•×, × ×“×‘ ×›×¥, ×¨×•×ª× ×¤×œ×“
- ×’×œ ××¨×™××œ×™, ×”×™×œ×” ×•×•×œ×£, ×¢×™×“×• × ×—××™××¡
- ×¢× ×‘×¨ ×¡×•×œ×•××•×Ÿ, ×“×•×¨ ××œ×›×”, ×©× ×™ ×‘×™×˜×•×Ÿ
- × ×™×¨ ××•×—×™×•×Ÿ, ××¤×¨×ª ×˜×œ, ×™×•× ×ª×Ÿ ×”×¨×•×©
- ×§×¨×Ÿ ×–×™×•

**Phone Numbers:**
- Prefixes: `050`, `052`, `054`
- Format: `050-123-4567`
- All randomized

**Emails:**
- Pattern: `{firstName}@gmail.com`
- Example: `×“× ×”@gmail.com`

**Notes (Hebrew):**
- `"×œ×§×•×—×” ×§×‘×•×¢×”"` (Regular client)
- `"××¢×“×™×£ ×ª×•×¨×™× ×‘×‘×•×§×¨"` (Prefers morning appointments)
- `"××œ×¨×’×™×” ×œ×—×•××¨×™ ×¦×‘×¢"` (Allergy to dyes)
- `"VIP"` (VIP client)
- `""` (Empty)
- `"××¢×“×™×¤×” ×¡×˜×™×™×œ×™×¡×˜×™×ª ××¡×•×™××ª"` (Prefers specific stylist)
- `"××¢×“×™×£ ×ª×•×¨×™× ××—×¨ ×”×¦×”×¨×™×™×"` (Prefers afternoon)
- `"××¢×“×™×¤×” ×ª×•×¨×™× ×‘×¡×•×¤×™ ×©×‘×•Ø¹"` (Prefers weekends)

**Created Dates:**
- Range: Last 6 months
- Randomized distribution

---

### 2. Visits (80 total)

**Service Types:**
- `×ª×¡×¤×•×¨×ª` (Haircut)
- `×¦×‘×¢` (Color)
- `×”×—×œ×§×”` (Straightening)
- `×˜×™×¤×•×œ ×¤× ×™×` (Facial)
- `×× ×™×§×•×¨` (Manicure)
- `×¤×“×™×§×•×¨` (Pedicure)
- `×ª×¡×¤×•×¨×ª + ×¦×‘×¢` (Haircut + Color)
- `×˜×™×¤×•×œ ×©×™×¢×¨` (Hair treatment)

**Prices:**
- Range: 80-500 ILS
- Random distribution

**Notes:**
- `""` (Empty)
- `"×©×™×œ××” ×‘××–×•××Ÿ"` (Paid cash)
- `"×‘×™×§×©×” ×ª×•×¨ ×—×•×–×¨"` (Requested return appointment)
- `"××¨×•×¦×” ×××•×“"` (Very satisfied)
- `"×¦×¨×™×š ××¢×§×‘"` (Needs follow-up)

**Created Dates:**
- Range: Last 3 months
- Randomized distribution

**Client Assignment:**
- Randomly assigned to created clients
- Ensures realistic distribution

---

### 3. Payments (40 total)

**Amounts:**
- Match visit prices
- Range: 80-500 ILS

**Status Distribution:**
- **70%** `completed` (28 payments)
- **20%** `pending` (8 payments)
- **10%** `failed` (4 payments)

**Payment Methods:**
- `credit_card` (Credit card)
- `cash` (Cash)
- `bit` (Bit transfer)
- `stripe` (Stripe)
- Random distribution

**Provider:**
- All set to `manual`

**Created Dates:**
- Range: Last 3 months
- Matches visit dates

**Paid At:**
- Only for `completed` payments
- Random date within last 3 months

**Linked Data:**
- 40 out of 80 visits have payments
- Each payment linked to:
  - Client (via `client_id`)
  - Visit (via `visit_id`)

---

## ğŸ”’ Security

### Permission Checks

**Admin Only:**
```typescript
// Check if user is admin
const { data: admin } = await supabase
  .from('admin_users')
  .select('user_id')
  .eq('user_id', user.id)

if (!admin) {
  return 403 // Forbidden
}
```

### Organization Check

**Only "Test" Organization:**
```typescript
const { data: testOrg } = await supabase
  .from('organizations')
  .select('id, name')
  .eq('name', 'Test')

if (!testOrg) {
  return 404 // Not Found
}
```

### UI Visibility

**Button Only Visible for Test:**
```typescript
{selectedOrg.name === 'Test' && (
  <Card>
    <Button onClick={handleSeedTestData}>
      ××œ× × ×ª×•× ×™ ×‘×“×™×§×”
    </Button>
  </Card>
)}
```

---

## ğŸ¨ UI Components

### Admin Panel - Test Organization Sheet

**Location:** `/admin/organizations` â†’ Test org Sheet

**New Card:**
```
â”Œâ”€ × ×ª×•× ×™ ×‘×“×™×§×” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ Yellow background          â”‚
â”‚                                â”‚
â”‚ ××œ× ××ª ×”××¨×’×•×Ÿ ×‘-25 ×œ×§×•×—×•×ª,    â”‚
â”‚ 80 ×‘×™×§×•×¨×™× ×•-40 ×ª×©×œ×•××™×       â”‚
â”‚ ×œ×¦×•×¨×š ×¦×™×œ×•××™ ××¡×š              â”‚
â”‚                                â”‚
â”‚ [××œ× × ×ª×•× ×™ ×‘×“×™×§×”] (Yellow)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Yellow background (`bg-yellow-50`)
- Yellow border (`border-yellow-200`)
- Gift icon (ğŸ)
- Loading state with spinner
- Disabled during seeding
- Confirmation dialog

---

## ğŸ§ª Testing

### Test Flow

1. **Create Test Organization:**
```sql
-- In Supabase SQL Editor
INSERT INTO organizations (name, email, category, plan)
VALUES ('Test', 'test@example.com', 'salon', 'pro');
```

2. **Run Seeder:**
- Via Admin UI (recommended)
- Or via API
- Or via script

3. **Verify Data:**
```sql
-- Check clients
SELECT COUNT(*) FROM clients WHERE org_id = (
  SELECT id FROM organizations WHERE name = 'Test'
);
-- Expected: 25

-- Check visits
SELECT COUNT(*) FROM visits WHERE org_id = (
  SELECT id FROM organizations WHERE name = 'Test'
);
-- Expected: 80

-- Check payments
SELECT COUNT(*) FROM payments WHERE org_id = (
  SELECT id FROM organizations WHERE name = 'Test'
);
-- Expected: 40
```

4. **Check Screenshots:**
- Dashboard stats should show data
- Clients page should list 25 clients
- Charts should have realistic data

---

## ğŸ“¸ Use Cases

### Screenshot Preparation

**Dashboard:**
- Total clients: 25
- Visits this month: ~25-30 (random)
- Revenue chart with data
- Active clients graph

**Clients Page:**
- Full list of 25 Hebrew names
- Phone numbers displayed
- Visit history per client
- Realistic notes

**Payments Page:**
- Mix of completed/pending/failed
- Different payment methods
- Various amounts
- Date range coverage

**Stats Page:**
- Revenue charts with data
- Top clients ranking
- Monthly trends

---

## ğŸ› Troubleshooting

### Organization Not Found

**Error:** `Organization "Test" not found`

**Solution:**
```sql
-- Create Test organization
INSERT INTO organizations (name, email, category, plan)
VALUES ('Test', 'test@example.com', 'salon', 'pro');
```

---

### Button Not Visible

**Issue:** Yellow card not showing in admin panel

**Checklist:**
- [ ] Organization name is exactly "Test" (case-sensitive)
- [ ] Viewing organization sheet (not main table)
- [ ] Logged in as admin
- [ ] Page refreshed after org creation

---

### Duplicate Data

**Issue:** Multiple runs create duplicate clients

**Solution:**
```sql
-- Clear test data before re-running
DELETE FROM payments WHERE org_id = (
  SELECT id FROM organizations WHERE name = 'Test'
);

DELETE FROM visits WHERE org_id = (
  SELECT id FROM organizations WHERE name = 'Test'
);

DELETE FROM clients WHERE org_id = (
  SELECT id FROM organizations WHERE name = 'Test'
);
```

**Or:**
Delete and recreate Test organization

---

### Permission Denied

**Error:** `Admin access required`

**Solution:**
```sql
-- Check if user is admin
SELECT * FROM admin_users WHERE user_id = auth.uid();

-- Add user as admin if needed
INSERT INTO admin_users (user_id, email, role)
VALUES (auth.uid(), 'your@email.com', 'admin');
```

---

## ğŸ“š Files

**API Route:**
- `src/app/api/admin/seed-test-data/route.ts`

**Script:**
- `scripts/seed-test-data.ts`

**Admin UI:**
- `src/app/admin/organizations/page.tsx`

---

## ğŸ” Example Data Preview

### Client Example
```json
{
  "first_name": "×“× ×”",
  "last_name": "×›×”×Ÿ",
  "email": "×“× ×”@gmail.com",
  "phone": "050-123-4567",
  "notes": "×œ×§×•×—×” ×§×‘×•×¢×”",
  "org_id": "uuid"
}
```

### Visit Example
```json
{
  "client_id": "client-uuid",
  "service_type": "×ª×¡×¤×•×¨×ª + ×¦×‘×¢",
  "price": 350,
  "notes": "××¨×•×¦×” ×××•×“",
  "org_id": "uuid"
}
```

### Payment Example
```json
{
  "client_id": "client-uuid",
  "visit_id": "visit-uuid",
  "amount": 350,
  "status": "completed",
  "payment_method": "credit_card",
  "paid_at": "2026-01-15T10:30:00Z",
  "org_id": "uuid"
}
```

---

## âœ… Success Metrics

After seeding, you should have:
- âœ… 25 clients with Hebrew names
- âœ… 80 visits with variety of services
- âœ… 40 payments (28 completed, 8 pending, 4 failed)
- âœ… Realistic data distribution
- âœ… Screenshots ready for marketing
- âœ… Demo environment populated

---

**Version History:**
- v2.19.0 (2026-02-12) - Initial test data seeder
- Realistic Israeli data
- Admin UI integration
- Standalone script option
